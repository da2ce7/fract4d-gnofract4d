todo for 2.2
* WW	cmap browser
* WW	cmap editor - brightness/contrast/gamma/HSV/RGB
* W	recoloring
* B	opening color browser sometimes applies 1st item
* W	logmap
* B	fractint doesn't reset vars between calls
* B	parse continuation lines correctly
* BB	changing inner colormap modifies outer appearance
* W	warn if overwrite/always save as/clear name on major change
* WW	include formula in .fct file
* B	O-fractals in fractint-g4.frm broken
* W	assert that correct number of params passed to init()
* B	click on colormap calls calc() twice
* W	speed up 'instant recolor'

UF Incompatibilities
* W	boolean, int, enum params 
* B? 	jgr.ufm:Rowan - default is blank
* B	jgr.ufm:Willow - '@fn1' is predefined (in switch)
* B	browse fhq.ufm - invalid UTF8 string passed to pango_layout
* B	dmj.ufm:DHNovaJulka - '#magn' - no symbol starting with t__ is allowed
* B	dmj.udm:dmj-ManyJulia - looks like 3 quadrants are wrong somehow
* B	jock.ufm:neptwona = "complex z = #pixel", ie redeclare z
* W	raise/remove limit on number of parameters

UI improvements 
* W	tooltips for custom widgets in toolbar
* BB	more robust error reporting
* W	last-chance exception handler
* B	maxiter isn't updated due to auto-deepening
* W	formula browser
	manage search path (user prefs)
	save changes to .frm files
* W	review human interface guidelines
* W	recently-used files
* W	angles in degrees?
* W	connect identically-named params in different parts of formula
* W	autosave
* W	make easier to use on click-to-focus systems
* W	click-and-release on angle,fourway - may require pointer_grab, though

Data gathering
* WW	SQM
* WW	Watson
* WW	Content Watson

Math weirdness:
* B	untitled_5 displays weirdly - 
	so do some combinations of bailout+colorfunc
* BB	giger.fct - results of extangle are different vs 1.9
* BB	horrible_drawing_bug.fct - zoom out & it looks very different
* B	click on GaussianInteger cfrm = print out some stuff
* W	default chebyshev gives blank screen
* B	standard.cfrm:triangle = all black

Outright bugs:
(gnofract4d:13094): Gtk-WARNING **: GtkEntry - did not receive focus-out-event.
If you
connect a handler to this signal, it must return
FALSE so the entry gets the event as well

Gtk-ERROR **: file gtkentry.c: line 4214 (blink_cb): assertion failed: (GTK_WIDGET_HAS_FOCUS (entry))
aborting...

Testing:
* W	end-to-end regression test vs V1.9

Distribution weirdness
* B	Mandrake: desktop icon not added to menu, pygtk2 is called pygtk2.0

differences from fractint:
* B	3rdim05 - default params bulge with fractint. They use sin() as default
	function, not ident()
* B	fn(z)+c: acos, acosh - think Fractint may be wrong
* B	fn(z*z)+c : acos, acosh 
* W	fractint-builtins.frm

done in 2.2:
* B	deepening doesn't happen until aa pass
* BB	close window with decoration = gtk-critical complaints
* W	reselect current fname and formula when reopening browser
* W	if #zwpixel not used, disable 4D in toolbar and explorer
* B	fix security bug
* B	compile on FreeBSD
* W	current angle in status bar
* W	drop-down resolution chooser
* B	method=multipass = compile error
* W	sort formula files by name
* B	jgr.ufm:Birch - compiler bug!
* B	open formula file on .cfrm should go to correct page in browser
* B	multiple copies of same filename

2.1:
* W	auto-list all formula files on path, parse on first click
* B	prompt if not saved
* W	tdis, other fractint colorfuncs
* B	Undo/redo behaves weirdly sometimes 
* W	periodicity
* WW	doc
* W	command-line arguments
* W	add some more built-in types
* W	Browser: remember selected formula on compile
* W	Browser: if no compile errors, reapply current formula
* W	Browser: run $EDITOR, refresh
* W	warn before quitting or save current fractal to autosave by default?
* B	translationerror on load doesn't pop up
* B	change width or setting to something which isn't a number/float: 
	ValueError in set_prefs, set_initparam etc
* BB	mandrake9.2 RPM - fract4d libs install to python2.2 directory, 
	python2.3 can't find them.
	Then RuntimeWarning when loaded - python C API has different version.
* B	sometimes deepen button doesn't work
* B	standard.cfrm:smooth = error "all parameters must be floats"
* BB	setting val for inner=flat changes bailout for formula 
	(but not visibly in GUI)
* W	UI for parameters for colorfuncs
* BB	tower_of_thorns doesn't load 
* B	rest doesn't change colorfunc paramsx
* B	saving a fractal with a parameterized cfunc = index out of range
* B	if load rgb colorizer .fct, report ValueError: Empty color array
* WW	angle and 4way widgets
* W	weirdness setting 
* W	explorer mode
* B	temp variables in colorfuncs persist across compilations?
* W	keyboard shortcuts for all widgets
* B	fn1..4 appear in random order in dialog box
* B	shrink image while drawing: python: fract4d/c/image.cpp:40: virtual void image::put(int, int, s_rgba): Assertion `off + 2 < bytes()' failed.
* B	load frm not on search path, undo = IOError "can't find formula file"
* B	setting inner func has no effect
* B	zooming broken if y-axis is flipped
* B	ejection_distance broken (Errors:
	invalid type complex for / on line 51, expecting float
	Warnings:
	Uninitialized variable @bailout referenced on line 51)
* BB	novamount.fct
* BB	auto-tolerance for older fractals
* BB	skull_fairy.fct
* WW	Inner, Outer pages for settings notebook
* BB	old images are flipped left-to-right. 
	- xy-rotating by #pi != vertical flip
* W 	browser : color funcs vs normal funcs
* W	init z from #zwpixel
* BB	lattice.fct - 1.9 is wrong too!
* B	buffer out of range when image is smaller than window
* B	3rdim01 - p1=(0.5,0.3). Flipped across x axis. 
	Gf4d has y increasing down, Fractint has it increasing up
* B	3daMand01,02 - left half of image (x < 0) is black
* B	browser pops up whenever click on fractal
* W	formula browser : load formula file
* BBB	crash when edit fractal parameters: G_IS_OBJECT(object) failed
* W	make default fractal more interesting
* B	Reset changes antialiasing
* B	mandelbar is a circle (?)
* B	defaults not applied when choose fractal
* B	weird line breaks in "formula contains a fractint-style..."
* B	apply newton, nova -> unsubscriptable object in get_func_value
* B	"(Untitled Mandelbrot)" name not updated when formula changed
* W	formula browser: apply to current fractal
* B	default size for browser is too small
* B	really wide edit box in formula browser
* B	apply "cubic burning ship", "lambda" -> list index out of range
* BB	reset on fragment.fct -> blank screen
* W	added defaults to gf4d.frm
* W	save images
* WW	save parameter files (define a format first)
* B	set_initparam didn't trigger parameters-changed
* BB	load dubious.fct, undo/redo = gone, black screen instead
* B	shouldn't start drawing original before loading params on cmd-line
* BB	acos,acosh,asin,asinh,atan,atanh,cotan,cotanh give 'str not callable'
* B	selected func in fractal settings dlg not updated by undo/redo
* B	change func then undo causes problems
* W	compiler properties
* W	store user preferences
* B	flip2julia puts 2 undo entries, + doesn't produce correct answer
* WW	undo/redo
* B	reset messes up undo order?
* W	combine 2 classes in gtkfractal.py
* W	auto_deepen, antialiasing widgets
* W	set size of diff_bailout check from periodicity info
* W	SMP/nthreads > 1
* B	exception if you open and choose OK without selecting a file
* B	test_fract4d.testMiniTextRender unreliable - initparams missing?
* WW	support different bailout functions
* WW	bailFuncs
* W	user parameter functions
* W	there is no warning before files are overwritten (parameter files +
	pictures)
* B	undo/redo cause recompilation

postponed
* W	does everything have to be .17f ?
* W	regression test vs fractint
* W	i18n, gettext
* B	warnings for several fractal types
* B	other windows always in front - is that good?
* W	exact SMP equality test
* B	reset doesn't affect function params
* W	tie menu-based and toolbar-based explorer toggling
* W	regenerate for explorer mode 
* B	gui unresponsive in explorer mode
* B	footnotes are fucked in yelp (have removed them)
* BB	seaslug.fct - diff bailout for quadratic
* B	coolness.fct - need direct coloring algorithm
* BB	deeper.fct, hive.fct, image.fct doesn't load properly - old format
* BB	daisychain.fct - bailFunc != diff for newton
* W 	enums, int parameters
* W	autosave/restore?
* W	max size for .so cache
* W	diff bailout for other types
* B	interrupt takes too long on deep-zoomed fractals
* W	signal tpool conds after releasing mutex?
* W	associate with file type?
* WW	register mime info?
* W	make it work with GMP
* W	faster GMP (get at internals during loop, maybe?)
* W	full-screen mode
* W 	desktop mode
* W 	demo mode
* WW	dirty/clean stuff won't work unless 
	- eject val / (scratch?) is kept freach point
	- can calc color without recalcing iter 
* W	bookmarks
* B	Mutants don't work at deep zooms
* W	fast single-undo
* WW	critical values + multiple basins/color schemes
* W	make sure inner function is sensible (itercount is pointless)
* WW	import .par files
* WW	import .upr files
* W	import ultrafractal gradient files
* WW	gimp gradient files:
GIMP Gradient
Possibly Name: %s
3 # number of points
0.000000 0.166667 0.333333 0.000000 0.000000 1.000000 1.000000 0.000000 0.000000 1.000000 1.000000 0 0
The format seems to be
start middle end [range 0...1]
R G B A left endpoint
R G B A right endpoint
type where type is one of linear (0), curved, sine,
sphere_increasing and sphere_decreasing
coloring, one of rgb, hsv_ccw, hsv_cw

The type & colouring are accessible to the gradient editor (the
user, I mean) in the "blending function for segment" and "Colouring 
type for segment" menus of the gradient editor menu.

This information is available in app/gradient.c and
app/gradient_header.h.

gnofract4d
* W	automatic addition of file extensions and
* W	automatic saving of picture and parameters at the same time 
* WW	How about colour cycling?
* B	image size should be persisted and kept under Preferences.
* B	aspect ratio locked with -i and -j params
* BB	hang changing back from explorer mode
* W	add fractal params to image, add load image
* W	remember .fct filenames and re-save to same place
* W	Julia preview by moving around while holding button3
* W	history window (move history inside library??)
* B	SIGSEGV when changing mutant weirdness - hard to repro
* WW	MDI
* B	pause doesn't stop subfracts
* WW	preview .fcts in open dialog
* W	sort out libfract4d versioning
* B	detect and report save problems
* W	warn about save overwrites

fract4d
* W	introduce image class
* W	support calc()
* W	parse command-line arguments
* W	save .tga
* WW	save .png

xscreensaver version
* W	auto random parameters
* W	draw to root window

Movies-
* B	deadlock when render movie while image is being drawn
* B	movies turn off AA
* W	implement frames/image
* W	implement curves
* W	load/save movies
* B	antialiasing/auto-deepen broken for movies
* W 	actually save movie images -> disk
* W	move keyframes up/down 
* B	lines are ugly
* W 	"constant zoom speed" mode?
* WW	run mpeg encoder?
* W	draw image all-at-once for movies?

CmapEditor
* W	put "click to apply" right next to preview
* B	update previews doesn't expose colorbuts
* B 	setting to an rgb_cizer permanently breaks cmap editor
* W	color cycling
* W	choose range + smooth
* W	choose every other in range
* W 	save new .map + add to preview list
* W 	remove debug printfs
* W	finish cmapeditor

